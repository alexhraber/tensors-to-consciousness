#!/usr/bin/env bash
set -euo pipefail

python tools/git_policy.py --hook pre-push

if [[ "${SKIP_ACT:-0}" == "1" ]]; then
  echo "SKIP_ACT=1 set; skipping act pre-push validation." >&2
  exit 0
fi

# Default to saturating local cores unless explicitly overridden.
export CI_GATE_JOBS="${CI_GATE_JOBS:-nproc}"

mise run pre-push
